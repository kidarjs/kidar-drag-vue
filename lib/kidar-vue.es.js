var t="object"==typeof global&&global&&global.Object===Object&&global,e="object"==typeof self&&self&&self.Object===Object&&self,n=t||e||Function("return this")(),i=n.Symbol,r=Object.prototype,o=r.hasOwnProperty,s=r.toString,a=i?i.toStringTag:void 0;var l=Object.prototype.toString;var c=i?i.toStringTag:void 0;function f(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":c&&c in Object(t)?function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var i=!0}catch(l){}var r=s.call(t);return i&&(e?t[a]=n:delete t[a]),r}(t):function(t){return l.call(t)}(t)}var u=/\s/;var d=/^\s+/;function h(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&u.test(t.charAt(e)););return e}(t)+1).replace(d,""):t}function p(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var m=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,y=/^0o[0-7]+$/i,g=parseInt;function b(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&"[object Symbol]"==f(t)}(t))return NaN;if(p(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=p(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=h(t);var n=v.test(t);return n||y.test(t)?g(t.slice(2),n?2:8):m.test(t)?NaN:+t}var _=function(){return n.Date.now()},x=Math.max,w=Math.min;function E(t,e,n){var i,r,o,s,a,l,c=0,f=!1,u=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var n=i,o=r;return i=r=void 0,c=e,s=t.apply(o,n)}function m(t){return c=t,a=setTimeout(y,e),f?h(t):s}function v(t){var n=t-l;return void 0===l||n>=e||n<0||u&&t-c>=o}function y(){var t=_();if(v(t))return g(t);a=setTimeout(y,function(t){var n=e-(t-l);return u?w(n,o-(t-c)):n}(t))}function g(t){return a=void 0,d&&i?h(t):(i=r=void 0,s)}function E(){var t=_(),n=v(t);if(i=arguments,r=this,l=t,n){if(void 0===a)return m(l);if(u)return clearTimeout(a),a=setTimeout(y,e),h(l)}return void 0===a&&(a=setTimeout(y,e)),s}return e=b(e)||0,p(n)&&(f=!!n.leading,o=(u="maxWait"in n)?x(b(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),E.cancel=function(){void 0!==a&&clearTimeout(a),c=0,i=l=r=a=void 0},E.flush=function(){return void 0===a?s:g(_())},E}let T,C,N,S,$;const j=t=>{t.style.position="absolute",t.style.width="8px",t.style.height="8px",t.style.backgroundColor="#ffffff",t.style.border="1px solid #333"},L=(()=>{let t;return()=>{if(t)return t;const e=document.createElement("div");e.className="__border_line",e.style.position="absolute",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.border="1px dashed #666";const n=document.createElement("div");n.className="__dot_lt",j(n),n.style.cursor="nw-resize",n.style.left="-4px",n.style.top="-4px";const i=document.createElement("div");i.className="__dot_lb",j(i),i.style.cursor="ne-resize",i.style.left="-4px",i.style.bottom="-4px";const r=document.createElement("div");r.className="__dot_rt",j(r),r.style.cursor="ne-resize",r.style.right="-4px",r.style.top="-4px";const o=document.createElement("div");return o.className="__dot_rb",j(o),o.style.cursor="nw-resize",o.style.right="-4px",o.style.bottom="-4px",t=[e,n,i,r,o],t}})(),O=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return p(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),E(t,e,{leading:i,maxWait:e,trailing:r})}((function(t,e,n,i){T.style.width=Number(n)/Number(C.clientWidth)*100+"%",T.style.height=Number(i)/Number(C.clientHeight)*100+"%",((t,e,n,i)=>{let{offsetHeight:r,offsetWidth:o}=T;e<0&&(e=0),t<0&&(t=0),t+o>C.offsetWidth&&(t=C.offsetWidth-o),e+r>C.offsetHeight&&(e=C.offsetHeight-r),T.style.left=t+"px",T.style.top=e+"px",T.style.right=n+"px",T.style.bottom=i+"px"})(t,e)}),100),H=t=>{t&&t.innerHTML.indexOf("__border_line")>-1&&L().forEach((e=>{t.removeChild(e)}))},k=(t,e)=>t.parentElement===e?((t=>{T!==t&&T&&H(T),-1===t.innerHTML.indexOf("__border_line")&&t.append(...L())})(t),T=t,!0):!!t.parentElement&&k(t.parentElement,e),W=t=>{let{target:e,currentTarget:n,pageX:i,pageY:r}=t;e instanceof HTMLElement&&n instanceof HTMLElement&&(e.className.startsWith("__dot")?(N=e.className.substring(6,8),n.style.cursor="lt"===N||"rb"===N?"nw-resize":"ne-resize"):k(e,n)?(N="move",n.style.cursor="move",S=i-T.offsetLeft,$=r-T.offsetTop):H(T),C=n)};let z;const M=t=>{if(!N)return;let{pageY:e,pageX:n}=t,{offsetLeft:i,offsetTop:r,offsetHeight:o,offsetWidth:s}=T,a=n-C.offsetLeft,l=e-C.offsetTop;switch(N){case"rb":O(i,r,a-i,l-r);break;case"rt":l>r+o&&(l=r+o),O(i,l,a-i,o-l+r);break;case"lt":l>r+o&&(l=r+o),a>i+s&&(a=i+s),O(a,l,s-a+i,o-l+r);break;case"lb":a>i+s&&(a=i+s),O(a,r,s-a+i,l-r);break;case"move":C.style.cursor="move",O(n-S,e-$,s,o)}};var D=(t,e)=>{z=(t=>e=>{N="",C&&(C.style.cursor="auto"),T&&t&&t(T)})(e),t.style.userSelect="none",t.addEventListener("mousedown",W),t.addEventListener("mouseup",z),t.addEventListener("mousemove",M)},I=t=>{t.style.userSelect="inherit",t.removeEventListener("mousedown",W),t.removeEventListener("mouseup",z),t.removeEventListener("mousemove",M),T&&H(T)};function R(t,e,n,i,r,o,s,a){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),s?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=l):r&&(l=a?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var f=c.render;c.render=function(t,e){return l.call(e),f(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}const X={name:"KiDragContainer",props:{editable:{type:Boolean,default:!0},items:{type:Array,default:()=>[]}},watch:{items:{handler:function(t,e){this.$emit("changed",t)},deep:!0},editable:function(t){t?this.active():this.disable()}},data:()=>({isCanDel:!0}),mounted(){this.$nextTick((()=>{this.editable&&this.active()}))},beforeDestroy(){this.disable()},methods:{deleteItem(t,e){this.$emit("delete",t,e)},updateItem(t){let{width:e,height:n,left:i,top:r}=t.style,o=t.getAttribute("dataset-drag-index");this.items[o].width===e&&this.items[o].height===n&&this.items[o].left===i&&this.items[o].top===r||(this.items[o].width=e,this.items[o].height=n,this.items[o].left=i,this.items[o].top=r,this.$emit("changed",this.items))},active(){D(this.$refs.dragContainer,this.updateItem),this.isCanDel=!0},disable(){I(this.$refs.dragContainer),this.isCanDel=!1}}},A={};var U=R(X,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"dragContainer",staticStyle:{position:"relative",height:"100%",width:"100%","background-color":"#f1f1f1"}},t._l(t.items,(function(e,i){return n("div",{key:e.id,style:"position: absolute;width:"+e.width+";height:"+e.height+";left:"+e.left+";top:"+e.top,attrs:{"dataset-drag-index":i}},[n("div",{staticClass:"__drag-item",staticStyle:{height:"100%",width:"100%",position:"absolute",top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)"}},[t._t("item",null,{item:e})],2),t.isCanDel?n("button",{staticStyle:{position:"absolute",right:"4px"},on:{click:function(n){return t.deleteItem(i,e)}}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 24 24",width:"1em",fill:"currentColor"}},[n("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),n("path",{attrs:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}})])]):t._e()])})),0)}),[],!1,V,null,null,null);function V(t){for(let e in A)this[e]=A[e]}var Y=function(){return U.exports}();Y.install=t=>{t.component(Y.name,Y)};export{Y as default};
